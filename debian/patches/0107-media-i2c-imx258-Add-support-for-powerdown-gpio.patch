From: =?utf-8?q?Ond=C5=99ej_Jirman?= <megi@xff.cz>
Date: Fri, 22 Oct 2021 18:10:18 +0200
Subject: media: i2c: imx258: Add support for powerdown gpio

On some boards powerdown signal needs to be deasserted for this
sensor to be enabled.

Signed-off-by: Ondrej Jirman <megi@xff.cz>
---
 drivers/media/i2c/imx258.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/drivers/media/i2c/imx258.c b/drivers/media/i2c/imx258.c
index 2570b51..0d86749 100644
--- a/drivers/media/i2c/imx258.c
+++ b/drivers/media/i2c/imx258.c
@@ -1030,6 +1030,10 @@ static int imx258_power_on(struct device *dev)
 		dev_err(dev, "failed to enable regulators\n");
 		return ret;
 	}
+	gpiod_set_value_cansleep(imx258->pwdn_gpio, 0);
+
+	ret = clk_prepare_enable(imx258->clk);
+	if (ret)
 
 	mdelay(20);
 
